(this["webpackJsonpcode-challenge-4-front"]=this["webpackJsonpcode-challenge-4-front"]||[]).push([[0],{189:function(e,t,n){},191:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(15),c=n.n(a),d=(n(189),n(41)),i=n(26),s=n.n(i),u=n(45),l=n(74),p=(n(191),n(257)),b=n(309),f=n(320),j=n(311),v=n(10),h=function(e){var t=e.onAdd,n=Object(r.useState)(""),o=Object(l.a)(n,2),a=o[0],c=o[1];return Object(v.jsx)(p.a,{style:{margin:16,padding:16},children:Object(v.jsxs)(b.a,{container:!0,children:[Object(v.jsx)(b.a,{xs:10,md:11,item:!0,style:{paddingRight:16},children:Object(v.jsx)(f.a,{fullWidth:!0,color:"primary",placeholder:"Add new todo",value:a,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){a&&"Enter"===e.key&&(t(a),c(""))}})}),Object(v.jsx)(b.a,{xs:2,md:1,item:!0,children:Object(v.jsx)(j.a,{fullWidth:!0,color:"primary",variant:"contained",disabled:""===a,onClick:function(){t(a),c("")},children:"Add"})})]})})},O=n(312),m=n(313),y=n(109),x=Object(r.memo)((function(e){return Object(v.jsxs)(p.a,{elevation:0,style:{padding:0,margin:0,backgroundColor:"#fafafa"},children:[Object(v.jsx)(O.a,{color:"primary",position:"static",style:{height:64},children:Object(v.jsx)(m.a,{style:{height:64},children:Object(v.jsx)(y.a,{color:"inherit",children:"TODOS"})})}),e.children]})})),g=n(310),T=n(314),A=n(321),D=n(316),w=n(317),E=n(315),k=n(159),C=n.n(k),U=function(e){var t=e.todo,n=e.divider,r=e.onComplete,o=e.onUncomplete,a=e.onDelete;return Object(v.jsxs)(T.a,{divider:n,children:[Object(v.jsx)(A.a,{checked:t.completed,disableRipple:!0,onClick:function(){t.id&&(t.completed?o&&o(t.id):r&&r(t.id))}}),Object(v.jsx)(D.a,{style:{textDecoration:t.completed?"line-through":""},primary:t.title}),Object(v.jsx)(w.a,{children:Object(v.jsx)(E.a,{"aria-label":"Delete Todo",onClick:function(){a&&t.id&&a(t.id)},children:Object(v.jsx)(C.a,{})})})]})},$=function(e){var t=e.items,n=e.onComplete,r=e.onUncomplete,o=e.onDelete;return Object(v.jsx)(v.Fragment,{children:t.length>0&&Object(v.jsx)(p.a,{style:{margin:16},children:Object(v.jsx)(g.a,{style:{overflow:"scroll"},children:t.map((function(e,a){return Object(v.jsx)(U,{todo:e,onComplete:n,onUncomplete:r,onDelete:o,divider:a!==t.length-1},e.id)}))})})})},q=n(166),S=n(46),I=n(151),P=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.graphql(Object(I.b)("\n  query GetTodos($limit: Int, $token: String) {\n    getTodos(limit: $limit, token: $token) {\n      Items {\n        id\n        title\n        completed\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",t));case 2:return r=e.sent,e.abrupt("return",null===(n=r.data)||void 0===n?void 0:n.getTodos);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.graphql(Object(I.b)("\n  mutation CreateTodo($title: String!) {\n    createTodo(title: $title) {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",t));case 2:return r=e.sent,e.abrupt("return",null===(n=r.data)||void 0===n?void 0:n.createTodo);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.graphql(Object(I.b)("\n  mutation DeleteTodo($id: ID!) {\n    deleteTodo(id: $id) {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",t));case 2:return r=e.sent,e.abrupt("return",null===(n=r.data)||void 0===n?void 0:n.deleteTodo);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.graphql(Object(I.b)("\n  mutation UpdateTodo($id: ID!, $todo: UpdateTodoInput!) {\n    updateTodo(id: $id, todo: $todo) {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",t));case 2:return r=e.sent,e.abrupt("return",null===(n=r.data)||void 0===n?void 0:n.updateTodo);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=n(82);function J(e,t){if("SET"===t.type){var n,r={};return null===(n=t.payload)||void 0===n||n.forEach((function(e){e.id&&(r[e.id]=e)})),{todos:r}}if("ADD"===t.type){var o=t.payload;if(o.id)return{todos:Object(d.a)(Object(d.a)({},e.todos),{},Object(z.a)({},o.id,o))}}if("UPDATE"===t.type){var a=t.payload;if(a.id){var c=e.todos[a.id];if(a&&a.updatedAt&&c&&c.updatedAt&&a.updatedAt>=c.updatedAt)return{todos:Object(d.a)(Object(d.a)({},e.todos),{},Object(z.a)({},a.id,a))}}}if("DELETE"===t.type){var i=t.payload.id,s=Object(d.a)({},e);return i&&delete s.todos[i],s}return e}var K=n(319),R=n(323);q.default.configure(JSON.parse('{"aws_appsync_graphqlEndpoint":"https://idkb44qmjvd3znoeot5dahf35y.appsync-api.us-east-1.amazonaws.com/graphql","aws_appsync_region":"us-east-1","aws_appsync_authenticationType":"API_KEY","aws_appsync_apiKey":"da2-jfpe7wl7mjbytm36wwedoea27e"}'));var B=function(){var e=Object(r.useReducer)(J,{todos:{}}),t=Object(l.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(!0),c=Object(l.a)(a,2),i=c[0],p=c[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),j=f[0],O=f[1];Object(r.useEffect)((function(){P({}).then((function(e){p(!1),o({type:"SET",payload:(null===e||void 0===e?void 0:e.Items)||[]})})).catch((function(e){p(!1),e&&e.errors&&e.errors[0]?O(e.errors[0].message):O("Error happened"),console.error(e)}));var e=S.a.graphql(Object(I.b)("\n  subscription OnCreateTodo {\n    onCreateTodo {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n")).subscribe({next:function(e){var t,n,r=e.value;(null===(t=r.data)||void 0===t?void 0:t.onCreateTodo)&&o({type:"ADD",payload:null===(n=r.data)||void 0===n?void 0:n.onCreateTodo})}}),t=S.a.graphql(Object(I.b)("\n  subscription OnUpdateTodo {\n    onUpdateTodo {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n")).subscribe({next:function(e){var t,n,r=e.value;(null===(t=r.data)||void 0===t?void 0:t.onUpdateTodo)&&o({type:"UPDATE",payload:null===(n=r.data)||void 0===n?void 0:n.onUpdateTodo})}}),n=S.a.graphql(Object(I.b)("\n  subscription OnDeleteTodo {\n    onDeleteTodo {\n      id\n      title\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n")).subscribe({next:function(e){var t,n,r=e.value;(null===(t=r.data)||void 0===t?void 0:t.onDeleteTodo)&&o({type:"DELETE",payload:null===(n=r.data)||void 0===n?void 0:n.onDeleteTodo})}});return function(){e.unsubscribe(),t.unsubscribe(),n.unsubscribe()}}),[]);var m=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,_({title:t});case 4:(n=e.sent)&&o({type:"ADD",payload:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0&&e.t0.errors&&e.t0.errors[0]?O(e.t0.errors[0].message):O("Error happened"),console.error(e.t0);case 12:return e.prev=12,p(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.a)({},n.todos[t]),e.prev=1,o({type:"DELETE",payload:{id:t}}),e.next=5,F({id:t});case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0&&e.t0.errors&&e.t0.errors[0]?O(e.t0.errors[0].message):O("Error happened"),console.error(e.t0),o({type:"ADD",payload:r});case 12:return e.prev=12,e.finish(12);case 14:case"end":return e.stop()}}),e,null,[[1,7,12,14]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.todos[t],e.prev=1,o({type:"UPDATE",payload:Object(d.a)(Object(d.a)({},r),{},{completed:!(null===r||void 0===r?void 0:r.completed)})}),e.next=5,L({id:t,todo:{completed:!(null===r||void 0===r?void 0:r.completed),title:(null===r||void 0===r?void 0:r.title)||""}});case 5:(a=e.sent)&&o({type:"UPDATE",payload:a}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0&&e.t0.errors&&e.t0.errors[0]?O(e.t0.errors[0].message):O("Error happened"),console.error(e.t0),o({type:"UPDATE",payload:r});case 14:return e.prev=14,e.finish(14);case 16:case"end":return e.stop()}}),e,null,[[1,9,14,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(x,{children:[i&&Object(v.jsx)(K.a,{color:"secondary"}),Object(v.jsx)(h,{onAdd:m}),Object(v.jsx)($,{onComplete:g,onUncomplete:g,onDelete:y,items:Object.keys(n.todos).map((function(e){return n.todos[e]})).sort((function(e,t){if(e.createdAt&&t.createdAt){if(e.createdAt<t.createdAt)return 1;if(e.createdAt>t.createdAt)return-1}return 0}))}),Object(v.jsx)(R.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:""!==j,message:j,onClose:function(){return O("")},autoHideDuration:6e3})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,324)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))};c.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(B,{})}),document.getElementById("root")),W()}},[[253,1,2]]]);
//# sourceMappingURL=main.f78e8b95.chunk.js.map